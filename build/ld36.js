!function t(e,n,i){function o(r,a){if(!n[r]){if(!e[r]){var p="function"==typeof require&&require;if(!a&&p)return p(r,!0);if(s)return s(r,!0);throw new Error("Cannot find module '"+r+"'")}var u=n[r]={exports:{}};e[r][0].call(u.exports,function(t){var n=e[r][1][t];return o(n?n:t)},u,u.exports,t,e,n,i)}return n[r].exports}for(var s="function"==typeof require&&require,r=0;r<i.length;r++)o(i[r]);return o}({1:[function(t,e,n){var i;i=function(t){},e.exports=i},{}],2:[function(t,e,n){var i;i={generate:function(){var t;return t=PIXI.Texture.fromImage("assets/textures/snow.png"),this.tilingSprite=new PIXI.extras.TilingSprite(t,3e3,3e3),stage.addChild(this.tilingSprite)},update:function(){return this.tilingSprite.tilePosition.x-=player.distance.x,this.tilingSprite.tilePosition.y-=player.distance.y}},e.exports=i},{}],3:[function(t,e,n){var i;i={generate:function(){var t,e,n;for(this.container=new PIXI.Container,this.particleContainer=new PIXI.particles.ParticleContainer(1e4,{position:!0,rotation:!0}),this.container.addChild(this.particleContainer),this.container.filterArea=new PIXI.Rectangle(0,0,window.w,window.h),this.container.filters=[new PIXI.filters.BlurYFilter],e=n=0;n<=1e4;e=++n)t=PIXI.Sprite.fromImage("assets/textures/flake.png"),t.anchor.set(.5),t.position.x=Math.random()*window.w,t.position.y=Math.random()*window.h,t.width=14,t.height=3,t.rotation=2.9,this.sprites.push(t),this.particleContainer.addChild(t);return stage.addChild(this.container)},update:function(){var t,e,n,i,o,s;for(t=10*Math.cos(ticks/20),o=this.sprites,s=[],n=0,i=o.length;n<i;n++)e=o[n],e.position.x+=30-t,e.position.y+=10+t,e.position.x>window.w&&(e.position.x=Math.random()*-50),e.position.y>window.h?s.push(e.position.y=Math.random()*-50):s.push(void 0);return s},sprites:[]},e.exports=i},{}],4:[function(t,e,n){var i;i=function(t){var e,n,i,o,s,r,a,p,u,d;return r=player.texture,u=r.position.x,d=r.position.y,p=r.width,a=r.height,o=t.position.x,s=t.position.y,i=t.width,e=t.height,n={x:null,y:null},u<o+i&&u+p>o+i&&(d<s&&s<d+a||d+a>s+e&&d<s+e)?n.x="right":u<o&&u+p>o&&(d<s&&s<d+a||d+a>s+e&&d<s+e)&&(n.x="left"),d<s&&s<d+a&&(u<o+i&&u+p>o+i||u<o&&u+p>o)?n.y="top":d+a>s+e&&d<s+e&&(u<o+i&&u+p>o+i||u<o&&u+p>o)&&(n.y="bottom"),n},e.exports=i},{}],5:[function(t,e,n){var i;i=function(){return alert("Ты замерз. И умер. Хм."),location.reload()},e.exports=i},{}],6:[function(t,e,n){var i,o,s,r,a,p,u,d;i=t("./sound"),u=function(t,e){return Math.floor(Math.random()*(e-t)+t)},s=function(t,e){var n,i,o,s,r,a,p;for(n=["campfire-1.png","campfire-2.png","campfire-3.png","campfire-4.png","campfire-5.png"],p=[],o=0,s=n.length;o<s;o++)i=n[o],a=PIXI.Texture.fromImage("assets/textures/campfire/"+i),p.push(a);return r=new PIXI.extras.MovieClip(p),r.position.x=t,r.position.y=e,r.animationSpeed=.2,r.play(),staticObjects.push(r),stage.addChild(r)},r=function(t,e){var n;return n=PIXI.Sprite.fromImage("assets/textures/car.png"),n.position.x=t,n.position.y=e,staticObjects.push(n),stage.addChild(n)},o=function(t,e){var n;return n=PIXI.Sprite.fromImage("assets/textures/body.png"),n.position.x=t,n.position.y=e,staticObjects.push(n),stage.addChild(n)},a=function(t,e){var n;return n=PIXI.Sprite.fromImage("assets/textures/tv.png"),n.position.x=t,n.position.y=e,staticObjects.push(n),stage.addChild(n)},d=["./assets/sounds/dream.mp3","./assets/sounds/quiet.mp3","./assets/sounds/where.mp3","./assets/sounds/cheat.mp3","./assets/sounds/test.mp3","./assets/sounds/lili.mp3","./assets/sounds/gone.mp3","./assets/sounds/doll.mp3","./assets/sounds/thing.mp3","./assets/sounds/home.mp3","./assets/sounds/some.mp3"],p=function(){var t,e,n;return t=2e3,e=window.currentLevelX=u(t*-1,t),n=window.currentLevelY=u(t*-1,t),s(e,n+100),Math.random()>.75&&o(e+350,n),Math.random()>.5&&r(e-150,n-200),Math.random()>.5&&a(e-400,n-100),window.currentLevelSound=new i(d[u(0,d.length-1)],e,n,(!0),.4),window.currentLevelSound.play()},e.exports=p},{"./sound":8}],7:[function(t,e,n){var i,o,s,r,a,p,u,d,c,l,h;a=t("./collision"),s=t("./action"),d=t("./level"),l=new Howl({src:["assets/sounds/step-1.wav"],volume:.5,preload:!0}),h=new Howl({src:["assets/sounds/step-2.wav"],volume:.5,preload:!0}),o="second",c=function(){if(!l.playing()&&!h.playing()){if("second"===o)return l.play(),o="first";if("first"===o)return h.play(),o="second"}},u=new PIXI.particles.ParticleContainer(1e3,{position:!0,rotation:!0}),r=function(t,e,n){var i,o;return l.playing()&&Math.random()>.75?(i=PIXI.Sprite.fromImage("assets/textures/footprint.png"),i.anchor.set(.5),i.position.x=t+10,i.position.y=e+150,i.width*=1.5,i.height*=1.5,i.rotation=Math.PI/2,u.addChild(i)):h.playing()&&Math.random()>.95?(o=PIXI.Sprite.fromImage("assets/textures/footprint.png"),o.anchor.set(.5),o.position.x=t+50,o.position.y=e+150,o.width*=1.5,o.height*=1.5,o.rotation=3*Math.PI/2,u.addChild(o)):void 0},p=function(t,e){var n,i,o,s,r,a,p,u;if(p=t,u=e,a=150,r=150,o=window.currentLevelX,s=window.currentLevelY,i=300,n=300,(p<o+i&&p+a>o+i||p<o&&p+a>o)&&(u<s&&s<u+r||u+r>s+n&&u<s+n))return console.log("collision"),window.currentLevelSound.pause(),d()},i=function(){function t(t,e){null==t&&(t=0),null==e&&(e=0),this.texture=PIXI.Sprite.fromImage("assets/textures/player.png"),this.texture.type="player",this.texture.width=150,this.texture.height=150,t-=this.texture.width/2,e-=this.texture.height/2,this.texture.position.x=t,this.texture.position.y=e,this.filter=new PIXI.filters.DisplacementFilter(PIXI.Sprite.fromImage("assets/textures/map.jpg"),200,200),this.texture.filters=[this.filter],this.footprintsContainer=u,stage.addChild(this.footprintsContainer),stage.addChild(this.texture),window.onkeydown=function(t){return function(e){var n,i,o,u,d;switch(e.keyCode){case 87:t.distance.y-=t.step,c(),r(t.texture.position.x,t.texture.position.y,Math.PI/2),p(t.texture.position.x,t.texture.position.y);break;case 83:t.distance.y+=t.step,c(),r(t.texture.position.x,t.texture.position.y,3*Math.PI/2),p(t.texture.position.x,t.texture.position.y);break;case 68:t.distance.x+=t.step,c(),r(t.texture.position.x,t.texture.position.y,2*Math.PI),p(t.texture.position.x,t.texture.position.y);break;case 65:t.distance.x-=t.step,c(),r(t.texture.position.x,t.texture.position.y,Math.PI),p(t.texture.position.x,t.texture.position.y)}for(d=[],i=0,o=staticObjects.length;i<o;i++)u=staticObjects[i],n=a(u),"left"===n.x?t.distance.x-=t.step:"right"===n.x&&(t.distance.x+=t.step),"top"===n.y?t.distance.y-=t.step:"bottom"===n.y&&(t.distance.y+=t.step),null!==n.x&&null!==n.y?d.push(s(u)):d.push(void 0);return d}}(this)}return t.prototype.updateFootprints=function(){var t,e,n,i,o;for(this.footprintsContainer.children.length>=1e3&&this.footprintsContainer.children.splice(0,1),i=this.footprintsContainer.children,o=[],e=0,n=i.length;e<n;e++)t=i[e],t.position.x-=this.distance.x,o.push(t.position.y-=this.distance.y);return o},t.prototype.step=5,t.prototype.distance={x:0,y:0},t}(),e.exports=i},{"./action":1,"./collision":4,"./level":6}],8:[function(t,e,n){var i;i=function(){function t(t,e,n,i,o){this.x=e,this.y=n,this.sound=new Howl({src:[t],loop:i,preload:!0,volume:o}),this.sound.pos(e,n,0),this.sound.pannerAttr({panningModel:"HRTF",refDistance:.1,rolloffFactor:2.5,distanceModel:"exponential"}),staticSounds.push(this)}return t.prototype.play=function(){return this.sound.play()},t.prototype.pause=function(){return this.sound.pause()},t.prototype.stop=function(){return this.sound.stop()},t.prototype.sound=null,t.prototype.x=0,t.prototype.y=0,t}(),e.exports=i},{}],9:[function(t,e,n){var i,o,s,r,a,p,u,d,c,l,f,x;i=t("./player"),window.staticObjects=[],window.staticSounds=[],window.currentLevelX=0,window.currentLevelY=0,window.currentLevelSound=null,window.w=window.innerWidth,window.h=window.innerHeight,l=t("./updateCamera"),f=t("./updateSounds"),d=t("./level"),p=t("./end"),r=t("./blizzard"),x=t("./wind"),s=t("./background"),window.ticks=0,c=new PIXI.WebGLRenderer(w,h),c.backgroundColor=15658734,document.body.appendChild(c.view),window.stage=new PIXI.Container,s.generate(),window.player=new i(w/2,h/2),x.play(),d(),r.generate(),a=new PIXI.filters.DisplacementFilter(PIXI.Sprite.fromImage("assets/textures/maaap.jpg")),a.padding=100,u=new PIXI.filters.ColorMatrixFilter,stage.filters=[a],u.blackAndWhite(),setTimeout(function(){return document.getElementsByClassName("instruction")[0].style.display="none"},8500),setTimeout(function(){return document.getElementsByClassName("instruction")[0].style.backgroundImage="none"},5e3),(o=function(){return requestAnimationFrame(o),ticks+=1,a.scale.x=100*Math.sin(ticks/20),a.scale.y=100*-Math.cos(ticks/20),player.filter.scale.x=100*Math.sin(ticks/20),player.filter.scale.y=200*-Math.cos(ticks/20),player.texture&&(f(),s.update(),player.updateFootprints(),l()),r.update(),c.render(stage)})()},{"./background":2,"./blizzard":3,"./end":5,"./level":6,"./player":7,"./updateCamera":10,"./updateSounds":11,"./wind":12}],10:[function(t,e,n){var i;i=function(){var t,e,n,i;for(i=player,e=0,n=staticObjects.length;e<n;e++)t=staticObjects[e],t.position.x-=i.distance.x,t.position.y-=i.distance.y;return window.currentLevelX-=i.distance.x,window.currentLevelY-=i.distance.y,i.distance.x=0,i.distance.y=0},e.exports=i},{}],11:[function(t,e,n){var i;i=function(){var t,e,n,i,o,s,r,a,p;for(o=player,i=2,r=[],e=0,n=staticSounds.length;e<n;e++)t=staticSounds[e],t.x-=o.distance.x,t.y-=o.distance.y,s=t.sound.pos(),a=t.x/window.w*i,p=t.y/window.h*i,isNaN(a)||isNaN(p)?r.push(void 0):r.push(t.sound.pos(a,p,0));return r},e.exports=i},{}],12:[function(t,e,n){var i;i=new Howl({src:["assets/sounds/wind.mp3"],volume:.4,loop:!0,preload:!0}),e.exports=i},{}]},{},[9]);
